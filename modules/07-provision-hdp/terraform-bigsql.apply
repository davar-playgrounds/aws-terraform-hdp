[0m[1mdata.consul_keys.app: Refreshing state...[0m
[0m[1mdata.template_file.ansible_hosts: Refreshing state...[0m

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [32m+[0m create
[0m
Terraform will perform the following actions:

[32m  [32m+[0m [32mlocal_file.ansible_hosts_inventory
[0m      id:       <computed>
      content:  "#[ambari-server]\n#ec2-18-207-111-69.compute-1.amazonaws.com ansible_host=18.207.111.69 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n\n[hdp-master]\nec2-18-207-111-69.compute-1.amazonaws.com ansible_host=18.207.111.69 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n\n[hdp-slave]\nec2-35-170-71-183.compute-1.amazonaws.com ansible_host=35.170.71.183 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n"
      filename: "/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts"
[0m
[0m[32m  [32m+[0m [32mnull_resource.apply_blueprint
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.clone_hdp_repo
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.configure_ambari
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.install_ambari
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.install_python_packages
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.passwordless_ssh
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.post_install
[0m      id:       <computed>
[0m
[0m[32m  [32m+[0m [32mnull_resource.prepare_nodes
[0m      id:       <computed>
[0m
[0m
[0m[1mPlan:[0m 9 to add, 0 to change, 0 to destroy.[0m

[0m[1mDo you want to perform these actions?[0m
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  [1mEnter a value:[0m [0m
[0m[1mnull_resource.passwordless_ssh: Creating...[0m[0m
[0m[1mnull_resource.clone_hdp_repo: Creating...[0m[0m
[0m[1mnull_resource.install_python_packages: Creating...[0m[0m
[0m[1mnull_resource.clone_hdp_repo: Provisioning with 'local-exec'...[0m[0m
[0m[1mnull_resource.install_python_packages: Provisioning with 'local-exec'...[0m[0m
[0m[1mnull_resource.passwordless_ssh: Provisioning with 'local-exec'...[0m[0m
[0m[1mlocal_file.ansible_hosts_inventory: Creating...[0m
  content:  "" => "#[ambari-server]\n#ec2-18-207-111-69.compute-1.amazonaws.com ansible_host=18.207.111.69 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n\n[hdp-master]\nec2-18-207-111-69.compute-1.amazonaws.com ansible_host=18.207.111.69 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n\n[hdp-slave]\nec2-35-170-71-183.compute-1.amazonaws.com ansible_host=35.170.71.183 ansible_user=centos ansible_ssh_private_key_file=\"~/.ssh/id_rsa\"\n"
  filename: "" => "/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts"[0m
[0m[1mlocal_file.ansible_hosts_inventory: Creation complete after 0s (ID: 7445b414727e9b3351f03d3bb9d3cd13c9cab0d8)[0m[0m
[0m[0mnull_resource.clone_hdp_repo (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook resources/clone-ansible-hortonworks.yml"]
[0m[0mnull_resource.install_python_packages (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/install-python-packages.yml"]
[0m[0mnull_resource.passwordless_ssh (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/passwordless-ssh.yml"]
[0m[0mnull_resource.clone_hdp_repo (local-exec):  [WARNING]: provided hosts list is empty, only localhost is available. Note
[0m[0mnull_resource.clone_hdp_repo (local-exec): that the implicit localhost does not match 'all'
[0m[0m
[0m[0mnull_resource.passwordless_ssh (local-exec): PLAY [all] *********************************************************************
[0m[0m
[0m[0mnull_resource.clone_hdp_repo (local-exec): PLAY [localhost] ***************************************************************
[0m[0m
[0m[0mnull_resource.passwordless_ssh (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0m
[0m[0mnull_resource.clone_hdp_repo (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): PLAY [localhost] ***************************************************************
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.clone_hdp_repo (local-exec): ok: [localhost]
[0m[0mnull_resource.install_python_packages (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.clone_hdp_repo (local-exec): TASK [Clone ansible-hortonworks repository] ************************************
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): TASK [install jq] **************************************************************
[0m[0mnull_resource.passwordless_ssh (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.passwordless_ssh (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.passwordless_ssh (local-exec): TASK [Copy private keys] *******************************************************
[0m[0mnull_resource.clone_hdp_repo (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.clone_hdp_repo (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.clone_hdp_repo (local-exec): localhost                  : ok=2    changed=0    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.clone_hdp_repo: Creation complete after 6s (ID: 1366300796307905848)[0m[0m
[0m[0mnull_resource.passwordless_ssh (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.passwordless_ssh (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.passwordless_ssh (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.passwordless_ssh (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=2    changed=0    unreachable=0    failed=0
[0m[0mnull_resource.passwordless_ssh (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=2    changed=0    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.passwordless_ssh: Creation complete after 6s (ID: 3098884106946653637)[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): PLAY [all] *********************************************************************
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): TASK [install pip] *************************************************************
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): TASK [install Python packages] *************************************************
[0m[1mnull_resource.install_python_packages: Still creating... (10s elapsed)[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_python_packages (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_python_packages (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.install_python_packages (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=3    changed=0    unreachable=0    failed=0
[0m[0mnull_resource.install_python_packages (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=3    changed=0    unreachable=0    failed=0
[0m[0mnull_resource.install_python_packages (local-exec): localhost                  : ok=2    changed=0    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.install_python_packages: Creation complete after 11s (ID: 2878799568301186306)[0m[0m
[0m[1mnull_resource.prepare_nodes: Creating...[0m[0m
[0m[1mnull_resource.prepare_nodes: Provisioning with 'local-exec'...[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts --extra-vars=cloud_name=static --extra-vars=$(consul kv get test/master/aws/hdp/cluster-bigsql) /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/prepare_nodes.yml"]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Create the required Ansible groups] **************************************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Add nodes to the hadoop-cluster group and groups representing the host_groups] ***
[0m[0mnull_resource.prepare_nodes (local-exec): included: /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/clouds/add_nodes_static.yml for localhost
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Add nodes to hadoop-cluster group] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [localhost] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [localhost] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Initialize the ambari_groups list] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the ambari_groups list (dynamic blueprint)] *********************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [localhost] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Fail if the static blueprint is not a valid JSON] ************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the ambari_groups list (static blueprint)] **********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Fail if the ambari_groups list is empty] *********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [localhost] => (item=hdp-master)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Add nodes to the ambari-server group] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [localhost]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Create the Ansible helper variables for the ambari-server] ***************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Initialize the control variables] ****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the namenode groups list] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the ZKFailoverController groups list] ***************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the resourcemanager groups list] ********************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the journalnode groups list] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the zookeeper groups list] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the zookeeper hosts list] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the oozie hosts list] *******************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the atlas hosts list] *******************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the druid hosts list] *******************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the superset hosts list] ****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the kafka groups and hosts lists] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the rangeradmin groups list] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the rangeradmin hosts list] *************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the rangerkms hosts list] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the streamline hosts list] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the registry hosts list] ****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the hdf hosts list] *********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the solr hosts list] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the all services and clients lists] *****************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Fail if the the static blueprint is not a valid JSON] ********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Create the Ansible helper variables for all nodes] ***********************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Check if /usr/bin/python exists] *****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Check if /usr/bin/python3 exists] ****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Fail if no standard python path could be found] **************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the ansible_python_interpreter to /usr/bin/python3] ******************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdp variable to all nodes] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdf variable to all nodes] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Set the install_hdpsearch variable to all nodes] *************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Apply the common role to the hadoop-cluster group] ***********************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Load variables] *************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/common/../common/vars/redhat-7.yml)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/common/../common/vars/redhat-7.yml)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Install required packages] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=openssh-clients,curl,unzip,tar,wget,openssl,chrony,openssl-devel)
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=openssh-clients,curl,unzip,tar,wget,openssl,chrony,openssl-devel)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Install Java] ***************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Make sure the NTP service is started] ***************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Make sure the NTP service is enabled] ***************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Add mappings to /etc/hosts] *************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Make sure /etc/security/limits.d exists] ************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Set nofile and nproc limits] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Set swappiness to 1] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Stop the firewalld firewall service] ****************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Disable the firewalld firewall service] *************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Disable selinux] ************************************************
[0m[1mnull_resource.prepare_nodes: Still creating... (10s elapsed)[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec):  [WARNING]: SELinux state change will take effect next reboot
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Disable Transparent Huge Pages until the next reboot] ***********
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Disable Transparent Huge Pages in Grub 2] ***********************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Configure tuned (RHEL/CentOS 7)] ********************************
[0m[0mnull_resource.prepare_nodes (local-exec): included: /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/common/tasks/tuned.yml for ec2-18-207-111-69.compute-1.amazonaws.com, ec2-35-170-71-183.compute-1.amazonaws.com
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Create tuned directory] *****************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Upload the tuned profile] ***************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Activate the tuned profile] *************************************
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Attempt to fetch the http secret key (if exists)] ***************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Create the http secret key locally (if nothing was previously fetched)] ***
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Copy the local http secret key to all nodes] ********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [common : Delete the local http secret key] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Apply the database role to the ambari-server group] **********************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Load variables] ***********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/database/../database/vars/redhat-7.yml)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Fail if trying to install MariaDB on unsupported OS] **********
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mysql repository (yum)] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mysql repository (zypper)] ****************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mysql repository key (apt)] ***************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mysql repository (apt)] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mariadb repository (yum)] *****************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Add the mariadb repository (zypper)] **************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Install embedded database packages] ***************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Initiate postgres] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Configure postgres to listen on all interfaces] ***************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Set postgres max_connections] *********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Configure mysql to listen on all interfaces] ******************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Set mysql max_connections] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Make sure the embedded service is started] ********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Make sure the embedded service is enabled] ********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the ambari database] **********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the hive database] ************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the oozie database] ***********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the druid database] ***********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the superset database] ********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the ranger database] **********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the rangerkms database] *******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the registry database] ********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [database : Prepare the streamline database] ******************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Apply the krb5-client role to the hadoop-cluster group] ******************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [krb5-client : Load variables] ********************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/krb5-client/../krb5-client/vars/redhat.yml)
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/krb5-client/../krb5-client/vars/redhat.yml)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [krb5-client : Install the Kerberos client package] ***********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [krb5-client : Upload the krb5.conf file] *********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY [Apply the mit-kdc role to the ambari-server group] ***********************
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Load variables] ************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/mit-kdc/../mit-kdc/vars/redhat-7.yml)
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Install MIT KDC packages] **************************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Upload the KDC configuration file] *****************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Create the KDC database for realm EXAMPLE.COM] *****************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Add the admin principal for realm EXAMPLE.COM] *****************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Fail if the admin principal could not be created] **************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Set the ACL for the admin user] ********************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Make sure the kdc service is started] **************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Make sure the kdc service is enabled] **************************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Make sure the kadmin service is started] ***********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): TASK [mit-kdc : Make sure the kadmin service is enabled] ***********************
[0m[0mnull_resource.prepare_nodes (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.prepare_nodes (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.prepare_nodes (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=31   changed=3    unreachable=0    failed=0
[0m[0mnull_resource.prepare_nodes (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=20   changed=3    unreachable=0    failed=0
[0m[0mnull_resource.prepare_nodes (local-exec): localhost                  : ok=5    changed=2    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.prepare_nodes: Creation complete after 20s (ID: 6468386149749208377)[0m[0m
[0m[1mnull_resource.install_ambari: Creating...[0m[0m
[0m[1mnull_resource.install_ambari: Provisioning with 'local-exec'...[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts --extra-vars=cloud_name=static --extra-vars=$(consul kv get test/master/aws/hdp/cluster-bigsql) /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/install_ambari.yml"]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY [Create the required Ansible groups] **************************************
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Add nodes to the hadoop-cluster group and groups representing the host_groups] ***
[0m[0mnull_resource.install_ambari (local-exec): included: /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/clouds/add_nodes_static.yml for localhost
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Add nodes to hadoop-cluster group] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): changed: [localhost] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0mnull_resource.install_ambari (local-exec): changed: [localhost] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Initialize the ambari_groups list] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the ambari_groups list (dynamic blueprint)] *********************
[0m[0mnull_resource.install_ambari (local-exec): ok: [localhost] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Fail if the static blueprint is not a valid JSON] ************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the ambari_groups list (static blueprint)] **********************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Fail if the ambari_groups list is empty] *********************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [localhost] => (item=hdp-master)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Add nodes to the ambari-server group] ************************************
[0m[0mnull_resource.install_ambari (local-exec): changed: [localhost]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY [Create the Ansible helper variables for the ambari-server] ***************
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Initialize the control variables] ****************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the namenode groups list] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the ZKFailoverController groups list] ***************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the resourcemanager groups list] ********************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the journalnode groups list] ************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the zookeeper groups list] **************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the zookeeper hosts list] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the oozie hosts list] *******************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the atlas hosts list] *******************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the druid hosts list] *******************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the superset hosts list] ****************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the kafka groups and hosts lists] *******************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the rangeradmin groups list] ************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the rangeradmin hosts list] *************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the rangerkms hosts list] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the streamline hosts list] **************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the registry hosts list] ****************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the hdf hosts list] *********************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the solr hosts list] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the all services and clients lists] *****************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Fail if the the static blueprint is not a valid JSON] ********************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY [Create the Ansible helper variables for all nodes] ***********************
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Check if /usr/bin/python exists] *****************************************
[0m[0mnull_resource.install_ambari (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Check if /usr/bin/python3 exists] ****************************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Fail if no standard python path could be found] **************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the ansible_python_interpreter to /usr/bin/python3] ******************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdp variable to all nodes] *******************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdf variable to all nodes] *******************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Set the install_hdpsearch variable to all nodes] *************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY [Apply the ambari-agent role to the hadoop-cluster group] *****************
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Load variables] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-repo/../ambari-repo/vars/redhat.yml)
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-repo/../ambari-repo/vars/redhat.yml)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (yum)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (zypper)] ************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add Ambari repository key (apt)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (apt)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Temporarily add the HDP-UTILS repository (SLES 12)] ********
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Make sure libsnappy1 is absent (bug in SLES 12 HDP-UTILS repo)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Install snappy from HDP-UTILS repo (bug in SLES 12 HDP-UTILS repo)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com] => (item=[])
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=[])
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Remove the HDP-UTILS repository previously added (SLES 12)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-agent : Install the ambari-agent package] *************************
[0m[1mnull_resource.install_ambari: Still creating... (10s elapsed)[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-agent : Set the Ambari Server in the agent configuration] *********
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-agent : Configure the Ambari Agents to use TLS 1.2] ***************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-agent : Make sure the ambari-agent service is started] ************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-agent : Make sure the ambari-agent service is enabled] ************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY [Apply the ambari-server role to the ambari-server group] *****************
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Load variables] ********************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-repo/../ambari-repo/vars/redhat.yml)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (yum)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (zypper)] ************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add Ambari repository key (apt)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Add the Ambari repository (apt)] ***************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Temporarily add the HDP-UTILS repository (SLES 12)] ********
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Make sure libsnappy1 is absent (bug in SLES 12 HDP-UTILS repo)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Install snappy from HDP-UTILS repo (bug in SLES 12 HDP-UTILS repo)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=[])
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-repo : Remove the HDP-UTILS repository previously added (SLES 12)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Load default variables] **********************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Load variables] ******************************************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-server/../ambari-server/vars/redhat-7.yml)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Install the ambari-server package] ***********************
[0m[1mnull_resource.install_ambari: Still creating... (20s elapsed)[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Install mysql required packages (for hive embedded)] *****
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=MySQL-python,mysql-connector-java)
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Install mysql-server on Ubuntu 16 (for hive embedded)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Configure mysql to listen on all interfaces (Ubuntu 16)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Configure the Ambari JDBC driver for mysql (for hive embedded)] ***
[0m[0mnull_resource.install_ambari (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Install embedded required packages] **********************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Load the Ambari Server schema (postgres)] ****************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Create a .pgpass file (SUSE)] ****************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Check if the postgres schema was already uploaded (SUSE)] ***
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Load the Ambari Server postgres schema (SUSE)] ***********
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Delete the .pgpass file (SUSE)] **************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Load the Ambari Server schema (mysql)] *******************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Fail if the mysql schema could not be loaded] ************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Configure the Ambari JDBC driver] ************************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Set the Ambari Server database setup options] ************
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Set the Ambari Server Java setup option (OpenJDK)] *******
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Set the Ambari Server Java setup option (Oracle JDK)] ****
[0m[0mnull_resource.install_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Run Ambari Server setup] *********************************
[0m[0mnull_resource.install_ambari (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Increase the Ambari Server startup timeout] **************
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): RUNNING HANDLER [ambari-server : Restart ambari-server] ************************
[0m[1mnull_resource.install_ambari: Still creating... (30s elapsed)[0m[0m
[0m[1mnull_resource.install_ambari: Still creating... (40s elapsed)[0m[0m
[0m[1mnull_resource.install_ambari: Still creating... (50s elapsed)[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): RUNNING HANDLER [ambari-server : Wait for Ambari Server to start listening on port 8080] ***
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Make sure the ambari-server service is started] **********
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): TASK [ambari-server : Make sure the ambari-server service is enabled] **********
[0m[0mnull_resource.install_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.install_ambari (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.install_ambari (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=35   changed=4    unreachable=0    failed=0
[0m[0mnull_resource.install_ambari (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=12   changed=1    unreachable=0    failed=0
[0m[0mnull_resource.install_ambari (local-exec): localhost                  : ok=5    changed=2    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.install_ambari: Creation complete after 54s (ID: 5786974549372310309)[0m[0m
[0m[1mnull_resource.configure_ambari: Creating...[0m[0m
[0m[1mnull_resource.configure_ambari: Provisioning with 'local-exec'...[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts --extra-vars=cloud_name=static --extra-vars=$(consul kv get test/master/aws/hdp/cluster-bigsql) /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/configure_ambari.yml"]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Create the required Ansible groups] **************************************
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Add nodes to the hadoop-cluster group and groups representing the host_groups] ***
[0m[0mnull_resource.configure_ambari (local-exec): included: /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/clouds/add_nodes_static.yml for localhost
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Add nodes to hadoop-cluster group] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): changed: [localhost] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0mnull_resource.configure_ambari (local-exec): changed: [localhost] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Initialize the ambari_groups list] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the ambari_groups list (dynamic blueprint)] *********************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [localhost] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the static blueprint is not a valid JSON] ************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the ambari_groups list (static blueprint)] **********************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the ambari_groups list is empty] *********************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [localhost] => (item=hdp-master)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Add nodes to the ambari-server group] ************************************
[0m[0mnull_resource.configure_ambari (local-exec): changed: [localhost]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Create the Ansible helper variables for the ambari-server] ***************
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Initialize the control variables] ****************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the namenode groups list] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the ZKFailoverController groups list] ***************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the resourcemanager groups list] ********************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the journalnode groups list] ************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the zookeeper groups list] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the zookeeper hosts list] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the oozie hosts list] *******************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the atlas hosts list] *******************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the druid hosts list] *******************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the superset hosts list] ****************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the kafka groups and hosts lists] *******************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the rangeradmin groups list] ************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the rangeradmin hosts list] *************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the rangerkms hosts list] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the streamline hosts list] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the registry hosts list] ****************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the hdf hosts list] *********************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the solr hosts list] ********************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the all services and clients lists] *****************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the the static blueprint is not a valid JSON] ********************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Create the Ansible helper variables for all nodes] ***********************
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Check if /usr/bin/python exists] *****************************************
[0m[0mnull_resource.configure_ambari (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Check if /usr/bin/python3 exists] ****************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if no standard python path could be found] **************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the ansible_python_interpreter to /usr/bin/python3] ******************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdp variable to all nodes] *******************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdf variable to all nodes] *******************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Set the install_hdpsearch variable to all nodes] *************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Check if the dynamic blueprint requested configuration is correct] *******
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item={u'host_group': u'hdp-master', u'services': [u'ZOOKEEPER_SERVER', u'NAMENODE', u'SECONDARY_NAMENODE', u'RESOURCEMANAGER', u'APP_TIMELINE_SERVER', u'HISTORYSERVER', u'SPARK2_JOBHISTORYSERVER', u'HIVE_SERVER', u'HIVE_METASTORE', u'WEBHCAT_SERVER', u'OOZIE_SERVER', u'KNOX_GATEWAY', u'AMBARI_SERVER', u'INFRA_SOLR', u'METRICS_COLLECTOR', u'METRICS_GRAFANA', u'METRICS_MONITOR', u'HST_SERVER', u'ACTIVITY_ANALYZER', u'ACTIVITY_EXPLORER', u'HST_AGENT'], u'clients': [u'ZOOKEEPER_CLIENT', u'HDFS_CLIENT', u'YARN_CLIENT', u'MAPREDUCE2_CLIENT', u'TEZ_CLIENT', u'SLIDER', u'PIG', u'SQOOP', u'HIVE_CLIENT', u'HCAT', u'OOZIE_CLIENT', u'INFRA_SOLR_CLIENT', u'SPARK2_CLIENT']})
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item={u'host_group': u'hdp-slave', u'services': [u'DATANODE', u'NODEMANAGER', u'METRICS_MONITOR', u'HST_AGENT'], u'clients': [u'ZOOKEEPER_CLIENT', u'HDFS_CLIENT', u'YARN_CLIENT', u'MAPREDUCE2_CLIENT', u'TEZ_CLIENT', u'SLIDER', u'PIG', u'SQOOP', u'HIVE_CLIENT', u'HCAT', u'OOZIE_CLIENT', u'INFRA_SOLR_CLIENT', u'SPARK2_CLIENT']})
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if ZooKeeper is not present] ****************************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Ranger prerequisites are not met] ********************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Ranger KMS prerequisites are not met] ****************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Atlas prerequisites are not met] *********************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Streamline prerequisites are not met] ****************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Registry prerequisites are not met] ******************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if Druid HA prerequisites are not met] ******************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the selected components should not be part of an HDP 3 blueprint] ***
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=HCAT)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=SLIDER)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=WEBHCAT_SERVER)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the selected components should not be part of an HDP 2 blueprint] ***
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=YARN_REGISTRY_DNS)
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=TIMELINE_READER)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the required HDFS components are not part of the blueprint] ******
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if HA NameNode prerequisites are not met (3 JournalNodes)] **********
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if HA NameNode prerequisites are not met (ZKFC)] ********************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if SECONDARY_NAMENODE is present with multiple NAMENODE] ************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the required Yarn components are not part of the blueprint] ******
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the required Hive components are not part of the blueprint] ******
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Fail if the required Druid components are not part of the blueprint] *****
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Gather facts from all nodes] *********************************************
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY [Apply the ambari-config role to the ambari-server group] *****************
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Load variables] ******************************************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-config/../ambari-config/vars/redhat.yml)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Set the GPL Licensed setting in Ambari] ******************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Attempt to change the default Ambari admin password] *****
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Set the HDP Search mpack filename] ***********************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Install the HDP Search Management Pack] ******************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Attempt to read the HDF repo build.id file] **************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Set the HDF build number] ********************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Set the HDF mpack filename] ******************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Install the HDF Management Pack] *************************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Install the HDF Management Pack (with --purge)] **********
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Modify the HDF base_url repository for HDF 3.1] **********
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Upload the HDF Version Definition file for HDF-only clusters (Ambari 2.6+)] ***
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-config/templates/../templates/vdf-HDF-3.1.2.0.xml.j2)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Modify the HDP base_url repository for HDP 2.6] **********
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Modify the HDP-UTILS base_url repository for HDP 2.6] ****
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Attempt to read the HDP repo build.id file (Ambari >= 2.6)] ***
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Set the HDP build number (Ambari >= 2.6)] ****************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Upload the HDP Version Definition file (Ambari >= 2.6)] ***
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-config/templates/../templates/vdf-HDP-2.6.5.0.xml.j2)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : ​Enable User Home Directory Creation] ********************
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ambari.post.user.creation.hook.enabled=true)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ambari.post.user.creation.hook=/var/lib/ambari-server/resources/scripts/post-user-creation-hook.sh)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Attempt to get an existing VDF for the required version (Ambari >= 2.6)] ***
[0m[1mnull_resource.configure_ambari: Still creating... (10s elapsed)[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Register the VDF with Ambari (Ambari >= 2.6)] ************
[0m[0mnull_resource.configure_ambari (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): TASK [ambari-config : Make sure all of the Ambari Agents have registered] ******
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0mnull_resource.configure_ambari (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.configure_ambari (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.configure_ambari (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=23   changed=1    unreachable=0    failed=0
[0m[0mnull_resource.configure_ambari (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=5    changed=1    unreachable=0    failed=0
[0m[0mnull_resource.configure_ambari (local-exec): localhost                  : ok=5    changed=2    unreachable=0    failed=0
[0m[0m
[0m[1mnull_resource.configure_ambari: Creation complete after 12s (ID: 7491050993956882449)[0m[0m
[0m[1mnull_resource.apply_blueprint: Creating...[0m[0m
[0m[1mnull_resource.apply_blueprint: Provisioning with 'local-exec'...[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): Executing: ["/bin/sh" "-c" "export ANSIBLE_HOST_KEY_CHECKING=False; ansible-playbook --inventory=/home/centos/aws-consul-terraform/modules/07-provision-hdp/output/ansible-hosts --extra-vars=cloud_name=static --extra-vars=@/home/centos/aws-consul-terraform/modules/07-provision-hdp$(consul kv get test/master/aws/hdp/cluster-bigsql) /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/apply_blueprint.yml"]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Create the required Ansible groups] **************************************
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Add nodes to the hadoop-cluster group and groups representing the host_groups] ***
[0m[0mnull_resource.apply_blueprint (local-exec): included: /home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/clouds/add_nodes_static.yml for localhost
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Add nodes to hadoop-cluster group] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): changed: [localhost] => (item=ec2-35-170-71-183.compute-1.amazonaws.com)
[0m[0mnull_resource.apply_blueprint (local-exec): changed: [localhost] => (item=ec2-18-207-111-69.compute-1.amazonaws.com)
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Initialize the ambari_groups list] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the ambari_groups list (dynamic blueprint)] *********************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [localhost] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the static blueprint is not a valid JSON] ************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the ambari_groups list (static blueprint)] **********************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the ambari_groups list is empty] *********************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [localhost] => (item=hdp-master)
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Add nodes to the ambari-server group] ************************************
[0m[0mnull_resource.apply_blueprint (local-exec): changed: [localhost]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Create the Ansible helper variables for the ambari-server] ***************
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Initialize the control variables] ****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the namenode groups list] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the ZKFailoverController groups list] ***************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the resourcemanager groups list] ********************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the journalnode groups list] ************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the zookeeper groups list] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the zookeeper hosts list] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the oozie hosts list] *******************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the atlas hosts list] *******************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the druid hosts list] *******************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the superset hosts list] ****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the kafka groups and hosts lists] *******************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the rangeradmin groups list] ************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the rangeradmin hosts list] *************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the rangerkms hosts list] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the streamline hosts list] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the registry hosts list] ****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the hdf hosts list] *********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the solr hosts list] ********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the all services and clients lists] *****************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=None)
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the blueprint path (relative to ambari-blueprint role)] **************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the blueprint path (absolute)] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Read the static blueprint content] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the the static blueprint is not a valid JSON] ********************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdp variable] ********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Populate the hiveserver hosts list] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdf variable] ********************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdpsearch variable] **************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Create the Ansible helper variables for all nodes] ***********************
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Check if /usr/bin/python exists] *****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): changed: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): changed: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Check if /usr/bin/python3 exists] ****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if no standard python path could be found] **************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the ansible_python_interpreter to /usr/bin/python3] ******************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdp variable to all nodes] *******************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdf variable to all nodes] *******************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Set the install_hdpsearch variable to all nodes] *************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Check if the dynamic blueprint requested configuration is correct] *******
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if there is no Ansible inventory group matching the blueprint's host_groups] ***
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item={u'host_group': u'hdp-master', u'services': [u'ZOOKEEPER_SERVER', u'NAMENODE', u'SECONDARY_NAMENODE', u'RESOURCEMANAGER', u'APP_TIMELINE_SERVER', u'HISTORYSERVER', u'HIVE_SERVER', u'HIVE_METASTORE', u'WEBHCAT_SERVER', u'AMBARI_SERVER', u'METRICS_COLLECTOR', u'METRICS_MONITOR', u'HST_SERVER', u'HBASE_MASTER', u'HBASE_REGIONSERVER', u'KNOX_GATEWAY'], u'clients': [u'ZOOKEEPER_CLIENT', u'HDFS_CLIENT', u'YARN_CLIENT', u'MAPREDUCE2_CLIENT', u'HIVE_CLIENT', u'HCAT', u'TEZ_CLIENT', u'SLIDER', u'SQOOP', u'HBASE_CLIENT']})
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item={u'host_group': u'hdp-slave', u'services': [u'DATANODE', u'NODEMANAGER', u'METRICS_MONITOR', u'HST_AGENT'], u'clients': [u'ZOOKEEPER_CLIENT', u'HDFS_CLIENT', u'YARN_CLIENT', u'MAPREDUCE2_CLIENT', u'HIVE_CLIENT', u'HCAT', u'TEZ_CLIENT', u'SLIDER', u'SQOOP', u'HBASE_CLIENT']})
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if ZooKeeper is not present] ****************************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Ranger prerequisites are not met] ********************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Ranger KMS prerequisites are not met] ****************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Atlas prerequisites are not met] *********************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Streamline prerequisites are not met] ****************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Registry prerequisites are not met] ******************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if Druid HA prerequisites are not met] ******************************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the selected components should not be part of an HDP 3 blueprint] ***
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=HCAT)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=SLIDER)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=WEBHCAT_SERVER)
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the selected components should not be part of an HDP 2 blueprint] ***
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=YARN_REGISTRY_DNS)
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=TIMELINE_READER)
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the required HDFS components are not part of the blueprint] ******
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if HA NameNode prerequisites are not met (3 JournalNodes)] **********
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if HA NameNode prerequisites are not met (ZKFC)] ********************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if SECONDARY_NAMENODE is present with multiple NAMENODE] ************
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the required Yarn components are not part of the blueprint] ******
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the required Hive components are not part of the blueprint] ******
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Fail if the required Druid components are not part of the blueprint] *****
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Gather facts from all nodes] *********************************************
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-35-170-71-183.compute-1.amazonaws.com]
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY [Apply the ambari-blueprint role to the ambari-server group] **************
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [Gathering Facts] *********************************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Load default variables] *******************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Load variables] ***************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com] => (item=/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/roles/ambari-blueprint/../ambari-blueprint/vars/redhat.yml)
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Get the VersionDefinition id from Ambari (Ambari >= 2.6)] ***
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Fail if could not get a VersionDefinition from Ambari] ***
[0m[0mnull_resource.apply_blueprint (local-exec): skipping: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Set the VersionDefinition id (Ambari >= 2.6)] *********
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Check if a cluster hdp-bigsql already exists] *********
[0m[0mnull_resource.apply_blueprint (local-exec): ok: [ec2-18-207-111-69.compute-1.amazonaws.com]
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): TASK [ambari-blueprint : Fail if a cluster hdp-bigsql already exists] **********
[0m[0mnull_resource.apply_blueprint (local-exec): fatal: [ec2-18-207-111-69.compute-1.amazonaws.com]: FAILED! => {"changed": false, "msg": "Cluster hdp-bigsql already exists!"}
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): NO MORE HOSTS LEFT *************************************************************
[0m[0mnull_resource.apply_blueprint (local-exec): 	to retry, use: --limit @/home/centos/aws-consul-terraform/modules/07-provision-hdp/resources/ansible-hortonworks/playbooks/apply_blueprint.retry
[0m[0m
[0m[0mnull_resource.apply_blueprint (local-exec): PLAY RECAP *********************************************************************
[0m[0mnull_resource.apply_blueprint (local-exec): ec2-18-207-111-69.compute-1.amazonaws.com : ok=19   changed=1    unreachable=0    failed=1
[0m[0mnull_resource.apply_blueprint (local-exec): ec2-35-170-71-183.compute-1.amazonaws.com : ok=5    changed=1    unreachable=0    failed=0
[0m[0mnull_resource.apply_blueprint (local-exec): localhost                  : ok=5    changed=2    unreachable=0    failed=0
[0m[0m
